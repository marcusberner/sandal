var Sandal=function(){"use strict";var n,e,r,o;return n=function(n){var e,r;return e=n.toString().replace(/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,""),r=e.slice(e.indexOf("(")+1,e.indexOf(")")).match(/([^\s,]+)/g),null===r&&(r=[]),r},e=function(n){for(var e=[],r=0;r<n.length;r++)e[r]=n[r];return e},r=function(r,o,t,i,a){var c,s,l;i=i||{},c=i.dependencies||n(t),(l=function(n){if(n)for(var e=0;e<n.length;e++){if(n[e]===o)throw new Error(o+" has circular dependency");r._container[n[e]]&&l(r._container[n[e]]._dependencies)}})(c),s=c.indexOf("done"),r._container[o]=function(n){var l=n;if(!i.lifecycle||"singleton"===i.lifecycle){if(r._container[o]._error)return r._error("Singleton "+o+" previously failed "),void n(r._container[o]._error);if(r._container[o].hasOwnProperty("_instance"))return r._info("Returning already resolved singleton "+o),void n(null,r._container[o]._instance);if(r._container[o]._resolvedCallbacks)return r._info("Resolving of the singleton "+o+" is in progress, waiting for completion"),void r._container[o]._resolvedCallbacks.push(n);r._container[o]._resolvedCallbacks=[n],l=function(n,e){r._info("Resolving of "+o+" done "+(n?"with":"without")+" error"),r._container[o]._error=n,r._container[o]._instance=e,r._info("Returning "+o+" to "+r._container[o]._resolvedCallbacks.length+" queued callbacks");for(var t=0;t<r._container[o]._resolvedCallbacks.length;t++)r._container[o]._resolvedCallbacks[t](n,e);r._container[o]._resolvedCallbacks=[]}}r._info("Resolving "+o+" dependencies: "+c),r.resolve(c,function(r){var o=e(arguments).slice(1);if(r)return n(r);try{a(t,o,s,l)}catch(r){l(r)}})},r._container[o]._dependencies=c},o=function(n){n=n||{};var e=this,r=n.console||console;e._options=n,e.name=n.name||"Container "+Math.round(1e5*Math.random()),e._info=function(o){n.verbose&&r&&r.info&&r.info(e.name+": "+o)},e._error=function(o){n.verbose&&r&&r.error&&r.error(e.name+": "+o)},e.clear()},o.prototype.has=function(n){return!!this._container[n]},o.prototype.resolve=function(){var e,r,o,t,i=this,a=!1,c=0,s=[];if("string"==typeof arguments[0])e=[arguments[0]],r=arguments[1];else if(arguments[0]instanceof Array)e=arguments[0],r=arguments[1];else{if("function"!=typeof arguments[0])return;e=n(arguments[0]).slice(1),r=arguments[0]}if(i._info("Initiating resolving of "+e),o=e.length,0===o)return r(null,[]);for(t=0;o>t;t++)!function(n,t){if(!a){if(i._info("Resolving "+t),!i._container[t]){var l="No component named "+t+" registered";return i._error(l),a=!0,r(new Error(l))}i._container[t](function(l,u){return l?(a=!0,i._error("Failed resolving "+t+": "+l.message),r(l)):void(a||(c++,s[n]=u,c===o&&(i._info("Done resolving "+e),r.apply(void 0,[l].concat(s)))))})}}(t,e[t])},o.prototype.internal=function(n){return this._info("Setting internal container to "+n.name),this._internal=n,this},o.prototype.object=function(n,e){return this._info("Register object "+n),this._container[n]=function(n){n(null,e)},this._container[n]._dependencies=[],this},o.prototype.factory=function(n,e,o){var t=this;return t._info("Register factory "+n),r(this,n,e,o,function(e,r,o,i){t._info("Applying factory "+n),o>=0?(r[o]=i,e.apply(void 0,r)):i(null,e.apply(void 0,r))}),this},o.prototype.service=function(n,e,o){var t=this;return t._info("Register service "+n),r(this,n,e,o,function(e,r,o,i){t._info("Creating service "+n);var a,c;a=function(){},a.prototype=e.prototype,c=new a,o>=0?(r[o]=function(n){return n?i(n):void i(null,c)},e.prototype.constructor.apply(c,r)):(e.prototype.constructor.apply(c,r),i(null,c))}),this},o.prototype.clear=function(){this._info("Clearing container");var n=this;return this._container={sandal:function(e){e(null,n)},done:function(n){n(null,null)}},n},o}();module&&module.exports&&(module.exports=Sandal);
//# sourceMappingURL=sandal-min.map